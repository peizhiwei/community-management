<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.peizhiwei.community.dao.HouseInfoDao">
	<select id="getallhouseinfo" resultType="com.peizhiwei.community.entity.HouseInfo">
		SELECT h.*,b.build_number as `buildInfo.buildNumber`,o.owner_name as `houseOwner.ownerName`,
			   t.house_type_name as `houseType.houseTypeName`, u.house_use_name as `houseUse.houseUseName`
		FROM house_info h
		LEFT JOIN building_info b on h.build_id=b.build_id
		LEFT JOIN house_owner o on h.owner_id=o.owner_id
		LEFT JOIN house_type t on h.house_type_id=t.house_type_id
		LEFT JOIN house_use u on h.house_use_id=u.house_use_id
	</select>
	<select id="getallhousetype" resultType="com.peizhiwei.community.entity.HouseType">
		SELECT * FROM house_type
	</select>
	<update id="updatehouseinfo" parameterType="com.peizhiwei.community.entity.HouseInfo">
		UPDATE house_info,house_type
		<set>
			<if test="houseNumber!=null">house_number=#{houseNumber},</if>
			<if test="houseArea!=null">house_area=#{houseArea},</if>
			<if test="houseInTime!=null">house_in_time=#{houseInTime},</if>
			<if test="houseType.houseTypeId!=null">house_info.house_type_id=#{houseType.houseTypeId}</if>
		</set>
		where house_id=#{houseId}
	</update>
</mapper>